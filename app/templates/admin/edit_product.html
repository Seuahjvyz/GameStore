<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Editar producto - Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style-provisional.css') }}">
</head>
<body>
    <nav class="barra_lateral">
    <a class="logo_link" href="{{ url_for('admin_dashboard') }}"><img class="logo-img" src="{{ url_for('static', filename='img/Icon_GS.png') }}" alt="Logo"></a>
        <ul>
            <li><a class="enlace_barra_lateral" href="{{ url_for('admin_dashboard') }}"><i class="fa-solid fa-house"></i> Inicio</a></li>
            <li><a class="enlace_barra_lateral active" href="{{ url_for('admin_inventario') }}"><i class="fa-solid fa-boxes-packing"></i> Inventario</a></li>
            <li style="margin-top:auto;"><a class="enlace_barra_lateral_fijo" href="/logout"><i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión</a></li>
        </ul>
    </nav>

    <main class="main-content">
        <div class="content-header">
            <h1>Editar producto</h1>
            <p>Modifica los datos del producto y presiona "Guardar".</p>
        </div>

        <div class="detail-section" style="max-width:900px;">
            <div class="section-title">Editar Producto</div>
            <form action="{{ url_for('admin_inventario_edit', pid=product.id) }}" method="post" class="form-inline" enctype="multipart/form-data">
                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                <div class="form-group">
                    <label for="title">Título</label>
                    <input type="text" id="title" name="title" required value="{{ product.title }}">
                </div>
                <div class="form-group">
                    <label for="price">Precio</label>
                    <input type="text" id="price" name="price" required value="{{ '%.2f'|format(product.price) }}">
                </div>
                <div class="form-group">
                    <label for="img_file">Imagen (subir archivo - opcional)</label>
                    <input type="file" id="img_file" name="img_file" accept="image/*">
                </div>
                <div class="form-group">
                    <label for="category">Categoría</label>
                    <select id="category" name="category">
                        <option value="Consolas" {% if product.category is defined and product.category == 'Consolas' %}selected{% endif %}>Consolas</option>
                        <option value="Juegos" {% if product.category is not defined or product.category == 'Juegos' %}selected{% endif %}>Juegos</option>
                        <option value="Accesorios" {% if product.category is defined and product.category == 'Accesorios' %}selected{% endif %}>Accesorios</option>
                        <option value="Controles" {% if product.category is defined and product.category == 'Controles' %}selected{% endif %}>Controles</option>
                    </select>
                </div>
                <div class="modal-actions" style="padding:0;">
                    <button type="submit" class="btn-primary">Guardar</button>
                    <a class="btn-secondary" href="{{ url_for('admin_inventario') }}">Cancelar</a>
                </div>
            </form>
        </div>
    </main>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="flash-messages" style="max-width:900px;margin:0 auto;padding:1rem;">
                    {% for m in messages %}
                        <div class="flash">{{ m }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

    <!-- Price validation handled by app/static/js/site_actions.js -->
</body>
</html>
